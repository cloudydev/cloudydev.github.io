---
layout: post
title: Box2D Version 2.3.0 代码实现
---

h1. 工程结构

代码取自 ["Box2D.org":http://box2d.org/downloads/] , 目前的最新版本是2.3.0, 工程结构比较简单，打开位遇 Build/xcode5 下的工程：

<div class="figure">
<img src="\data\Box2D-Xcode-project.png">
</div>

整个工程有两个主要的build target：
* 库文件libBox2D.a
* 可执行程序Testbed，包含几乎所有Box2D功能的DEMO和测试集合，如果想了解Box2D的使用，这部分的代码是最好的资料

引擎部分的源码放置在Box2D文件夹下面，代码体积1.3w行，分成Collision, Commonn, Dynamics和Rope四部分，关于一些基本概念和上述模块的作用和关系在 ["Box2D的手册":http://box2d.org/manual.pdf] 里说明的非常清楚，一定要看～

<pre class = "table">
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
C++                             46           2182           1834           9669
C/C++ Header                    47           1412           2115           3910
CMake                            2              6              4            200
-------------------------------------------------------------------------------
SUM:                            95           3600           3953          13779
-------------------------------------------------------------------------------
</pre>

p. 

另外需要提起的时，Box2D的注释非常详细：大家可以看到在本文的第一张图里面看到注释里的 Position Correction Notes部分，作者把实现过程中尝试了的算法和思考过程都写了进去，一些数值优化的部分也做了关键性的注释，所以说注释的部分也包含了很大的信息量！

h1. 内存分配

h2. Block Allocater

h2. Stack Allocater

h2. LIFO Stack

h1. 数学运算

h1. 形状

h1. Dynamics
